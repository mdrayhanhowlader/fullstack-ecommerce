<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ecommerce Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* Custom Styles */
        .page { display: none; }
        .page.active { display: block; }
        .nav-btn.active { background-color: #f3f4f6; font-weight: 500; }
        .modal-overlay { 
            display: none; 
            position: fixed; 
            inset: 0; 
            background: rgba(0,0,0,0.5); 
            z-index: 50;
            align-items: center;
            justify-content: center;
        }
        .modal-overlay.active { display: flex; }
        .modal-content { 
            background: white; 
            border-radius: 0.5rem; 
            padding: 1.5rem; 
            max-width: 32rem; 
            width: 90%; 
            max-height: 90vh;
            overflow-y: auto;
        }
        .modal-large { max-width: 48rem; }
        .modal-small { max-width: 24rem; }
        .stat-card { transition: transform 0.2s; }
        .stat-card:hover { transform: translateY(-2px); }
        .chart-wrapper { position: relative; height: 250px; }
        .loading { opacity: 0.5; pointer-events: none; }
        .toggle-switch {
            appearance: none;
            width: 3rem;
            height: 1.5rem;
            background: #d1d5db;
            border-radius: 1rem;
            position: relative;
            cursor: pointer;
        }
        .toggle-switch:checked {
            background: #374151;
        }
        .toggle-switch::before {
            content: '';
            position: absolute;
            width: 1.25rem;
            height: 1.25rem;
            border-radius: 50%;
            background: white;
            top: 0.125rem;
            left: 0.125rem;
            transition: transform 0.2s;
        }
        .toggle-switch:checked::before {
            transform: translateX(1.5rem);
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b fixed top-0 left-0 right-0 z-40">
        <div class="flex justify-between items-center px-6 py-4">
            <h1 class="text-xl font-semibold text-gray-800">Shop Dashboard</h1>
            <div class="flex items-center gap-4">
                <button id="profileBtn" class="flex items-center gap-2 px-3 py-2 rounded-lg hover:bg-gray-100">
                    <div class="w-8 h-8 bg-gray-300 rounded-full flex items-center justify-center">
                        <span class="text-sm text-gray-600">A</span>
                    </div>
                    <span class="text-sm">Admin</span>
                </button>
            </div>
        </div>
    </header>

    <div class="flex pt-16">
        <!-- Sidebar -->
        <aside class="w-64 bg-white h-screen shadow-sm border-r fixed left-0">
            <nav class="mt-6">
                <ul class="space-y-2 px-4">
                    <li><button class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700 active" data-page="overview">üìä Overview</button></li>
                    <li><button class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="products">üì¶ Products</button></li>
                    <li><button class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="orders">üìã Orders</button></li>
                    <li><button class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="customers">üë• Customers</button></li>
                    <li><button class="nav-btn w-full text-left px-4 py-3 rounded-lg hover:bg-gray-100 text-gray-700" data-page="settings">‚öôÔ∏è Settings</button></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 ml-64 p-6">
            <div id="content" class="bg-white rounded-lg shadow-sm border p-6 min-h-screen">
                
                <!-- Overview Page -->
                <div id="overview-page" class="page active">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800">Dashboard Overview</h2>
                        <select id="timeFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            <option value="day">Today</option>
                            <option value="week">This Week</option>
                            <option value="month">This Month</option>
                            <option value="year">This Year</option>
                        </select>
                    </div>

                    <!-- Stats Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="stat-card bg-white border rounded-lg p-6 shadow-sm">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Total Sales</p>
                                    <p class="text-2xl font-semibold text-gray-800" id="totalSales">‡ß≥0</p>
                                </div>
                                <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                    <span class="text-green-600 text-xl">‡ß≥</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white border rounded-lg p-6 shadow-sm">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Total Orders</p>
                                    <p class="text-2xl font-semibold text-gray-800" id="totalOrders">0</p>
                                </div>
                                <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                    <span class="text-blue-600 text-xl">üì¶</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white border rounded-lg p-6 shadow-sm">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Completed Orders</p>
                                    <p class="text-2xl font-semibold text-gray-800" id="completedOrders">0</p>
                                </div>
                                <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                    <span class="text-purple-600 text-xl">‚úì</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="stat-card bg-white border rounded-lg p-6 shadow-sm">
                            <div class="flex items-center justify-between">
                                <div>
                                    <p class="text-sm text-gray-600">Active Products</p>
                                    <p class="text-2xl font-semibold text-gray-800" id="activeProducts">0</p>
                                </div>
                                <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                    <span class="text-orange-600 text-xl">üì±</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Charts Row -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
                        <div class="chart-container bg-white border rounded-lg p-6 shadow-sm">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Sales Chart</h3>
                            <div class="chart-wrapper">
                                <canvas id="salesChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-container bg-white border rounded-lg p-6 shadow-sm">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Revenue Chart</h3>
                            <div class="chart-wrapper">
                                <canvas id="revenueChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity -->
                    <div class="bg-white border rounded-lg p-6 shadow-sm">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">Recent Activity</h3>
                        <div id="recentActivity" class="space-y-3">
                            <!-- Recent activity items will be loaded here -->
                        </div>
                    </div>
                </div>

                <!-- Products Page -->
                <div id="products-page" class="page">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800">Products Management</h2>
                        <div class="flex gap-3">
                            <button id="addProductBtn" class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                                Add Product
                            </button>
                        </div>
                    </div>
                    
                    <!-- Search and Filter -->
                    <div class="flex gap-4 mb-6">
                        <div class="flex-1">
                            <input type="text" id="productSearch" placeholder="Search products..." class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                        </div>
                        <select id="categoryFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            <option value="all">All Categories</option>
                            <option value="electronics">Electronics</option>
                            <option value="clothing">Clothing</option>
                            <option value="books">Books</option>
                            <option value="home">Home & Garden</option>
                        </select>
                        <select id="statusFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            <option value="all">All Status</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                        </select>
                    </div>
                    
                    <!-- Products Table -->
                    <div class="bg-white border rounded-lg shadow-sm overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Product</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Category</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Price</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Stock</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Status</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="productsTable" class="divide-y divide-gray-200">
                                    <!-- Products will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div id="productsEmptyState" class="hidden text-center py-12">
                        <div class="text-gray-400 text-6xl mb-4">üì¶</div>
                        <h3 class="text-lg font-medium text-gray-700 mb-2">No products found</h3>
                        <p class="text-gray-500 mb-4">Get started by adding your first product</p>
                        <button class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Add Product</button>
                    </div>
                </div>

                <!-- Orders Page -->
                <div id="orders-page" class="page">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800">Orders Management</h2>
                        <div class="flex gap-3">
                            <select id="orderFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                                <option value="all">All Orders</option>
                                <option value="pending">Pending</option>
                                <option value="processing">Processing</option>
                                <option value="shipped">Shipped</option>
                                <option value="delivered">Delivered</option>
                                <option value="completed">Completed</option>
                                <option value="cancelled">Cancelled</option>
                            </select>
                        </div>
                    </div>
                    
                    <!-- Search and Date Filter -->
                    <div class="flex gap-4 mb-6">
                        <div class="flex-1">
                            <input type="text" id="orderSearch" placeholder="Search by order ID or customer name..." class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                        </div>
                        <input type="date" id="dateFromFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                        <input type="date" id="dateToFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                        <button id="clearFilters" class="px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 text-sm">Clear</button>
                    </div>
                    
                    <!-- Orders Table -->
                    <div class="bg-white border rounded-lg shadow-sm overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Order ID</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Customer</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Products</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Amount</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Status</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Date</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="ordersTable" class="divide-y divide-gray-200">
                                    <!-- Orders will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div id="ordersEmptyState" class="hidden text-center py-12">
                        <div class="text-gray-400 text-6xl mb-4">üìã</div>
                        <h3 class="text-lg font-medium text-gray-700 mb-2">No orders found</h3>
                        <p class="text-gray-500">Orders will appear here when customers place them</p>
                    </div>
                </div>

                <!-- Customers Page -->
                <div id="customers-page" class="page">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-semibold text-gray-800">Customers Management</h2>
                        <div class="flex gap-3">
                            <button id="exportCustomersBtn" class="border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50 text-sm">
                                Export CSV
                            </button>
                        </div>
                    </div>
                    
                    <!-- Search and Filter -->
                    <div class="flex gap-4 mb-6">
                        <div class="flex-1">
                            <input type="text" id="customerSearch" placeholder="Search customers by name or email..." class="w-full border border-gray-300 rounded-lg px-3 py-2 text-sm">
                        </div>
                        <select id="customerStatusFilter" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            <option value="all">All Customers</option>
                            <option value="active">Active</option>
                            <option value="inactive">Inactive</option>
                            <option value="blocked">Blocked</option>
                        </select>
                        <select id="customerSortBy" class="border border-gray-300 rounded-lg px-3 py-2 text-sm">
                            <option value="name">Sort by Name</option>
                            <option value="orders">Sort by Orders</option>
                            <option value="spent">Sort by Spent</option>
                            <option value="date">Sort by Join Date</option>
                        </select>
                    </div>
                    
                    <!-- Customer Stats -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                        <div class="bg-white border rounded-lg p-4 shadow-sm">
                            <div class="text-sm text-gray-600">Total Customers</div>
                            <div class="text-xl font-semibold text-gray-800" id="totalCustomers">0</div>
                        </div>
                        <div class="bg-white border rounded-lg p-4 shadow-sm">
                            <div class="text-sm text-gray-600">Active Customers</div>
                            <div class="text-xl font-semibold text-gray-800" id="activeCustomers">0</div>
                        </div>
                        <div class="bg-white border rounded-lg p-4 shadow-sm">
                            <div class="text-sm text-gray-600">New This Month</div>
                            <div class="text-xl font-semibold text-gray-800" id="newCustomers">0</div>
                        </div>
                        <div class="bg-white border rounded-lg p-4 shadow-sm">
                            <div class="text-sm text-gray-600">Avg. Order Value</div>
                            <div class="text-xl font-semibold text-gray-800" id="avgOrderValue">‡ß≥0</div>
                        </div>
                    </div>
                    
                    <!-- Customers Table -->
                    <div class="bg-white border rounded-lg shadow-sm overflow-hidden">
                        <div class="overflow-x-auto">
                            <table class="w-full">
                                <thead class="bg-gray-50 border-b">
                                    <tr>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Customer</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Contact</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Location</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Total Orders</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Total Spent</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Status</th>
                                        <th class="px-6 py-4 text-left text-sm font-medium text-gray-600">Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="customersTable" class="divide-y divide-gray-200">
                                    <!-- Customers will be loaded here -->
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Empty State -->
                    <div id="customersEmptyState" class="hidden text-center py-12">
                        <div class="text-gray-400 text-6xl mb-4">üë•</div>
                        <h3 class="text-lg font-medium text-gray-700 mb-2">No customers found</h3>
                        <p class="text-gray-500">Customers will appear here when they register or place orders</p>
                    </div>
                </div>

                <!-- Settings Page -->
                <div id="settings-page" class="page">
                    <h2 class="text-2xl font-semibold text-gray-800 mb-6">Settings</h2>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Profile Settings -->
                        <div class="bg-white border rounded-lg p-6 shadow-sm">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Profile Settings</h3>
                            <form id="profileForm">
                                <div class="space-y-4">
                                    <div class="flex items-center justify-center mb-6">
                                        <div class="relative">
                                            <div class="w-20 h-20 rounded-full bg-gray-300 flex items-center justify-center">
                                                <span class="text-2xl text-gray-600">A</span>
                                            </div>
                                            <button type="button" id="changeProfileImage" class="absolute bottom-0 right-0 bg-gray-800 text-white rounded-full p-1 hover:bg-gray-700">
                                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="grid grid-cols-2 gap-4">
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                                            <input type="text" id="profileFirstName" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="Admin" required>
                                        </div>
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                                            <input type="text" id="profileLastName" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="User" required>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                        <input type="email" id="profileEmail" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="admin@shop.com" required>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                                        <input type="text" id="profilePhone" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="+8801234567890" required>
                                    </div>
                                    
                                    <div>
                                        <label class="block text-sm font-medium text-gray-700 mb-2">Address</label>
                                        <textarea id="profileAddress" class="w-full border border-gray-300 rounded-lg px-3 py-2 h-20">Dhaka, Bangladesh</textarea>
                                    </div>
                                    
                                    <div class="flex gap-3">
                                        <button type="submit" class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Update Profile</button>
                                        <button type="button" id="changePasswordBtn" class="border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50">Change Password</button>
                                    </div>
                                </div>
                            </form>
                        </div>

                        <!-- Admin Management -->
                        <div class="bg-white border rounded-lg p-6 shadow-sm">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="text-lg font-semibold text-gray-800">Admin Management</h3>
                                <button id="addAdminBtn" class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Add Admin</button>
                            </div>
                            <div id="adminsList" class="space-y-3">
                                <!-- Admin list will be loaded here -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- System Settings -->
                    <div class="mt-6 bg-white border rounded-lg p-6 shadow-sm">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4">System Settings</h3>
                        <form id="systemSettingsForm">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Shop Name</label>
                                    <input type="text" id="shopName" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="My Ecommerce Shop">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Currency</label>
                                    <select id="shopCurrency" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                                        <option value="BDT" selected>‡ß≥ Bangladeshi Taka</option>
                                        <option value="USD">$ US Dollar</option>
                                        <option value="EUR">‚Ç¨ Euro</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Tax Rate (%)</label>
                                    <input type="number" id="taxRate" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="0" min="0" max="100" step="0.1">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium text-gray-700 mb-2">Shipping Fee</label>
                                    <input type="number" id="shippingFee" class="w-full border border-gray-300 rounded-lg px-3 py-2" value="100" min="0">
                                </div>
                            </div>
                            <div class="mt-6">
                                <button type="submit" class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Save Settings</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- Add Product Modal -->
    <div id="addProductModal" class="modal-overlay">
        <div class="modal-content modal-large">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-800">Add New Product</h3>
                <button class="modal-close text-gray-500 hover:text-gray-700" data-modal="addProductModal">&times;</button>
            </div>
            <form id="addProductForm">
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Product Name</label>
                            <input type="text" id="productName" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">SKU</label>
                            <input type="text" id="productSku" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="productDescription" class="w-full border border-gray-300 rounded-lg px-3 py-2 h-24" required></textarea>
                    </div>
                    
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Price (‡ß≥)</label>
                            <input type="number" id="productPrice" class="w-full border border-gray-300 rounded-lg px-3 py-2" required min="0" step="0.01">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Cost Price (‡ß≥)</label>
                            <input type="number" id="productCostPrice" class="w-full border border-gray-300 rounded-lg px-3 py-2" min="0" step="0.01">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Stock Quantity</label>
                            <input type="number" id="productStock" class="w-full border border-gray-300 rounded-lg px-3 py-2" required min="0">
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                            <select id="productCategory" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                                <option value="">Select Category</option>
                                <option value="electronics">Electronics</option>
                                <option value="clothing">Clothing</option>
                                <option value="books">Books</option>
                                <option value="home">Home & Garden</option>
                                <option value="sports">Sports</option>
                                <option value="beauty">Beauty & Health</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Brand</label>
                            <input type="text" id="productBrand" class="w-full border border-gray-300 rounded-lg px-3 py-2">
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Product Images</label>
                        <input type="file" id="productImages" class="w-full border border-gray-300 rounded-lg px-3 py-2" accept="image/*" multiple>
                        <p class="text-xs text-gray-500 mt-1">You can select multiple images</p>
                    </div>
                </div>
                <div class="flex gap-3 mt-6">
                    <button type="button" class="modal-close border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50" data-modal="addProductModal">Cancel</button>
                    <button type="submit" class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Add Product</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Admin Modal -->
    <div id="addAdminModal" class="modal-overlay">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-800">Add New Admin</h3>
                <button class="modal-close text-gray-500 hover:text-gray-700" data-modal="addAdminModal">&times;</button>
            </div>
            <form id="addAdminForm">
                <div class="space-y-4">
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">First Name</label>
                            <input type="text" id="adminFirstName" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Last Name</label>
                            <input type="text" id="adminLastName" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                        <input type="email" id="adminEmail" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Phone</label>
                        <input type="text" id="adminPhone" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
                        <select id="adminRole" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                            <option value="">Select Role</option>
                            <option value="admin">Admin</option>
                            <option value="sub-admin">Sub Admin</option>
                            <option value="moderator">Moderator</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                        <input type="password" id="adminPassword" class="w-full border border-gray-300 rounded-lg px-3 py-2" required>
                    </div>
                </div>
                <div class="flex gap-3 mt-6">
                    <button type="button" class="modal-close border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50" data-modal="addAdminModal">Cancel</button>
                    <button type="submit" class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Add Admin</button>
                </div>
            </form>
        </div>
    </div>

    <!-- View Order Modal -->
    <div id="viewOrderModal" class="modal-overlay">
        <div class="modal-content modal-large">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-semibold text-gray-800">Order Details</h3>
                <button class="modal-close text-gray-500 hover:text-gray-700" data-modal="viewOrderModal">&times;</button>
            </div>
            <div id="orderDetailsContent">
                <!-- Order details will be loaded here -->
            </div>
            <div class="flex gap-3 mt-6">
                <button type="button" class="modal-close border border-gray-300 px-4 py-2 rounded-lg hover:bg-gray-50" data-modal="viewOrderModal">Close</button>
                <button type="button" id="updateOrderStatusBtn" class="bg-gray-800 text-white px-4 py-2 rounded-lg hover:bg-gray-700">Update Status</button>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="modal-overlay">
        <div class="bg-white rounded-lg p-6 text-center">
            <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-gray-800 mx-auto mb-4"></div>
            <p class="text-gray-600">Loading...</p>
        </div>
    </div>

    <script>
        // Sample Data
        let dashboardData = {
            products: [
                {
                    id: 1,
                    name: 'iPhone 14 Pro',
                    sku: 'IP14P-001',
                    description: 'Latest iPhone with advanced features',
                    price: 120000,
                    costPrice: 95000,
                    stock: 25,
                    category: 'electronics',
                    brand: 'Apple',
                    status: 'active',
                    images: [],
                    createdAt: '2024-01-15'
                },
                {
                    id: 2,
                    name: 'Samsung Galaxy S23',
                    sku: 'SGS23-001',
                    description: 'Premium Android smartphone',
                    price: 95000,
                    costPrice: 75000,
                    stock: 15,
                    category: 'electronics',
                    brand: 'Samsung',
                    status: 'active',
                    images: [],
                    createdAt: '2024-01-10'
                },
                {
                    id: 3,
                    name: 'Cotton T-Shirt',
                    sku: 'CTS-001',
                    description: 'Comfortable cotton t-shirt',
                    price: 1500,
                    costPrice: 800,
                    stock: 50,
                    category: 'clothing',
                    brand: 'Generic',
                    status: 'active',
                    images: [],
                    createdAt: '2024-01-08'
                },
                {
                    id: 4,
                    name: 'MacBook Air M2',
                    sku: 'MBA-M2-001',
                    description: 'Lightweight laptop with M2 chip',
                    price: 150000,
                    costPrice: 125000,
                    stock: 8,
                    category: 'electronics',
                    brand: 'Apple',
                    status: 'active',
                    images: [],
                    createdAt: '2024-01-05'
                }
            ],
            orders: [
                {
                    id: 1001,
                    customerId: 1,
                    customerName: 'John Doe',
                    customerEmail: 'john@example.com',
                    customerPhone: '+8801234567890',
                    products: [
                        { productId: 1, name: 'iPhone 14 Pro', quantity: 1, price: 120000 }
                    ],
                    totalAmount: 120000,
                    shippingFee: 100,
                    status: 'completed',
                    paymentStatus: 'paid',
                    shippingAddress: 'Dhaka, Bangladesh',
                    orderDate: '2024-12-15',
                    deliveryDate: '2024-12-17'
                },
                {
                    id: 1002,
                    customerId: 2,
                    customerName: 'Jane Smith',
                    customerEmail: 'jane@example.com',
                    customerPhone: '+8801234567891',
                    products: [
                        { productId: 2, name: 'Samsung Galaxy S23', quantity: 1, price: 95000 }
                    ],
                    totalAmount: 95000,
                    shippingFee: 100,
                    status: 'processing',
                    paymentStatus: 'paid',
                    shippingAddress: 'Chittagong, Bangladesh',
                    orderDate: '2024-12-14',
                    deliveryDate: null
                },
                {
                    id: 1003,
                    customerId: 3,
                    customerName: 'Bob Johnson',
                    customerEmail: 'bob@example.com',
                    customerPhone: '+8801234567892',
                    products: [
                        { productId: 3, name: 'Cotton T-Shirt', quantity: 3, price: 1500 }
                    ],
                    totalAmount: 4500,
                    shippingFee: 100,
                    status: 'pending',
                    paymentStatus: 'pending',
                    shippingAddress: 'Sylhet, Bangladesh',
                    orderDate: '2024-12-13',
                    deliveryDate: null
                }
            ],
            customers: [
                {
                    id: 1,
                    name: 'John Doe',
                    email: 'john@example.com',
                    phone: '+8801234567890',
                    address: 'Dhaka, Bangladesh',
                    totalOrders: 5,
                    totalSpent: 250000,
                    status: 'active',
                    joinDate: '2024-01-01'
                },
                {
                    id: 2,
                    name: 'Jane Smith',
                    email: 'jane@example.com',
                    phone: '+8801234567891',
                    address: 'Chittagong, Bangladesh',
                    totalOrders: 3,
                    totalSpent: 180000,
                    status: 'active',
                    joinDate: '2024-01-15'
                },
                {
                    id: 3,
                    name: 'Bob Johnson',
                    email: 'bob@example.com',
                    phone: '+8801234567892',
                    address: 'Sylhet, Bangladesh',
                    totalOrders: 2,
                    totalSpent: 75000,
                    status: 'active',
                    joinDate: '2024-02-01'
                }
            ],
            admins: [
                {
                    id: 1,
                    firstName: 'Main',
                    lastName: 'Admin',
                    email: 'admin@shop.com',
                    phone: '+8801000000000',
                    role: 'admin',
                    status: 'active'
                },
                {
                    id: 2,
                    firstName: 'Sub',
                    lastName: 'Admin',
                    email: 'sub@shop.com',
                    phone: '+8801000000001',
                    role: 'sub-admin',
                    status: 'active'
                }
            ]
        };

        // Global variables
        let currentPage = 'overview';
        let salesChart, revenueChart;

        // Navigation functionality
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            // Initialize navigation
            initNavigation();
            // Load initial data
            loadOverview();
            // Initialize event listeners
            initEventListeners();
        }

        function initNavigation() {
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Hide all pages
                    document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
                    
                    // Show selected page
                    const pageName = this.dataset.page;
                    document.getElementById(pageName + '-page').classList.add('active');
                    currentPage = pageName;
                    
                    // Load page data
                    loadPageData(pageName);
                });
            });
        }

        function loadPageData(page) {
            switch(page) {
                case 'overview':
                    loadOverview();
                    break;
                case 'products':
                    loadProducts();
                    break;
                case 'orders':
                    loadOrders();
                    break;
                case 'customers':
                    loadCustomers();
                    break;
                case 'settings':
                    loadSettings();
                    break;
            }
        }

        // Overview page functions
        function loadOverview() {
            updateStats();
            loadCharts();
            loadRecentActivity();
        }

        function updateStats() {
            const totalSales = dashboardData.orders
                .filter(order => order.status === 'completed')
                .reduce((sum, order) => sum + order.totalAmount, 0);
            
            const totalOrders = dashboardData.orders.length;
            const completedOrders = dashboardData.orders.filter(order => order.status === 'completed').length;
            const activeProducts = dashboardData.products.filter(product => product.status === 'active').length;

            document.getElementById('totalSales').textContent = `‡ß≥${totalSales.toLocaleString()}`;
            document.getElementById('totalOrders').textContent = totalOrders;
            document.getElementById('completedOrders').textContent = completedOrders;
            document.getElementById('activeProducts').textContent = activeProducts;
        }

        function loadCharts() {
            // Sales Chart
            const salesCtx = document.getElementById('salesChart').getContext('2d');
            if (salesChart) salesChart.destroy();
            salesChart = new Chart(salesCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Sales',
                        data: [12, 19, 15, 25, 22, 30, 28, 35, 32, 40, 38, 45],
                        borderColor: 'rgb(75, 192, 192)',
                        backgroundColor: 'rgba(75, 192, 192, 0.1)',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });

            // Revenue Chart
            const revenueCtx = document.getElementById('revenueChart').getContext('2d');
            if (revenueChart) revenueChart.destroy();
            revenueChart = new Chart(revenueCtx, {
                type: 'bar',
                data: {
                    labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
                    datasets: [{
                        label: 'Revenue (‡ß≥)',
                        data: [45000, 52000, 38000, 47000, 59000, 63000, 71000, 68000, 75000, 82000, 89000, 95000],
                        backgroundColor: 'rgba(54, 162, 235, 0.8)',
                        borderColor: 'rgba(54, 162, 235, 1)',
                        borderWidth: 1,
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    }
                }
            });
        }

        function loadRecentActivity() {
            const recentActivity = document.getElementById('recentActivity');
            const activities = [
                { type: 'order', message: 'New order #1003 received from Bob Johnson', time: '2 minutes ago' },
                { type: 'product', message: 'iPhone 14 Pro stock updated', time: '15 minutes ago' },
                { type: 'customer', message: 'New customer Jane Smith registered', time: '1 hour ago' },
                { type: 'order', message: 'Order #1002 shipped to Chittagong', time: '2 hours ago' }
            ];

            recentActivity.innerHTML = activities.map(activity => `
                <div class="flex items-center gap-3 p-3 bg-gray-50 rounded-lg">
                    <div class="w-8 h-8 rounded-full flex items-center justify-center ${
                        activity.type === 'order' ? 'bg-blue-100 text-blue-600' :
                        activity.type === 'product' ? 'bg-green-100 text-green-600' :
                        'bg-purple-100 text-purple-600'
                    }">
                        ${activity.type === 'order' ? 'üìã' : activity.type === 'product' ? 'üì¶' : 'üë§'}
                    </div>
                    <div class="flex-1">
                        <p class="text-sm text-gray-800">${activity.message}</p>
                        <p class="text-xs text-gray-500">${activity.time}</p>
                    </div>
                </div>
            `).join('');
        }

        // Products page functions
        function loadProducts() {
            const tbody = document.getElementById('productsTable');
            const emptyState = document.getElementById('productsEmptyState');
            
            if (dashboardData.products.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            tbody.innerHTML = dashboardData.products.map(product => `
                <tr>
                    <td class="px-6 py-4">
                        <div>
                            <div class="font-medium text-gray-800">${product.name}</div>
                            <div class="text-sm text-gray-600">${product.description}</div>
                            <div class="text-xs text-gray-500">SKU: ${product.sku}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full">${product.category}</span>
                    </td>
                    <td class="px-6 py-4 text-gray-800">‡ß≥${product.price.toLocaleString()}</td>
                    <td class="px-6 py-4">
                        <span class="text-gray-800">${product.stock}</span>
                        ${product.stock < 10 ? '<span class="text-xs text-red-600 ml-2">Low Stock</span>' : ''}
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs rounded-full ${
                            product.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                        }">${product.status}</span>
                    </td>
                    <td class="px-6 py-4">
                        <button class="text-blue-600 hover:text-blue-800 text-sm mr-2" onclick="editProduct(${product.id})">Edit</button>
                        <button class="text-red-600 hover:text-red-800 text-sm" onclick="deleteProduct(${product.id})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        // Orders page functions
        function loadOrders() {
            const tbody = document.getElementById('ordersTable');
            const emptyState = document.getElementById('ordersEmptyState');
            
            if (dashboardData.orders.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            tbody.innerHTML = dashboardData.orders.map(order => `
                <tr>
                    <td class="px-6 py-4 font-medium text-gray-800">#${order.id}</td>
                    <td class="px-6 py-4">
                        <div>
                            <div class="font-medium text-gray-800">${order.customerName}</div>
                            <div class="text-sm text-gray-600">${order.customerEmail}</div>
                            <div class="text-xs text-gray-500">${order.customerPhone}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm">
                            ${order.products.map(p => `${p.name} (${p.quantity})`).join(', ')}
                        </div>
                    </td>
                    <td class="px-6 py-4 text-gray-800">‡ß≥${order.totalAmount.toLocaleString()}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs rounded-full ${getStatusColor(order.status)}">${order.status}</span>
                    </td>
                    <td class="px-6 py-4 text-gray-600">${formatDate(order.orderDate)}</td>
                    <td class="px-6 py-4">
                        <button class="text-blue-600 hover:text-blue-800 text-sm mr-2" onclick="viewOrder(${order.id})">View</button>
                        <button class="text-green-600 hover:text-green-800 text-sm" onclick="updateOrderStatus(${order.id})">Update</button>
                    </td>
                </tr>
            `).join('');
        }

        function getStatusColor(status) {
            switch(status) {
                case 'completed': return 'bg-green-100 text-green-800';
                case 'processing': return 'bg-blue-100 text-blue-800';
                case 'shipped': return 'bg-purple-100 text-purple-800';
                case 'pending': return 'bg-yellow-100 text-yellow-800';
                case 'cancelled': return 'bg-red-100 text-red-800';
                default: return 'bg-gray-100 text-gray-800';
            }
        }

        // Customers page functions
        function loadCustomers() {
            updateCustomerStats();
            const tbody = document.getElementById('customersTable');
            const emptyState = document.getElementById('customersEmptyState');
            
            if (dashboardData.customers.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            tbody.innerHTML = dashboardData.customers.map(customer => `
                <tr>
                    <td class="px-6 py-4">
                        <div class="font-medium text-gray-800">${customer.name}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-gray-600">${customer.email}</div>
                        <div class="text-sm text-gray-500">${customer.phone}</div>
                    </td>
                    <td class="px-6 py-4 text-gray-600">${customer.address}</td>
                    <td class="px-6 py-4 text-gray-800">${customer.totalOrders}</td>
                    <td class="px-6 py-4 text-gray-800">‡ß≥${customer.totalSpent.toLocaleString()}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs rounded-full ${
                            customer.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                        }">${customer.status}</span>
                    </td>
                    <td class="px-6 py-4">
                        <button class="text-blue-600 hover:text-blue-800 text-sm mr-2" onclick="viewCustomer(${customer.id})">View</button>
                        <button class="text-red-600 hover:text-red-800 text-sm" onclick="blockCustomer(${customer.id})">Block</button>
                    </td>
                </tr>
            `).join('');
        }

        function updateCustomerStats() {
            const totalCustomers = dashboardData.customers.length;
            const activeCustomers = dashboardData.customers.filter(c => c.status === 'active').length;
            const newCustomers = dashboardData.customers.filter(c => new Date(c.joinDate) > new Date(Date.now() - 30*24*60*60*1000)).length;
            const avgOrderValue = Math.round(dashboardData.customers.reduce((sum, c) => sum + (c.totalSpent / c.totalOrders), 0) / totalCustomers) || 0;

            document.getElementById('totalCustomers').textContent = totalCustomers;
            document.getElementById('activeCustomers').textContent = activeCustomers;
            document.getElementById('newCustomers').textContent = newCustomers;
            document.getElementById('avgOrderValue').textContent = `‡ß≥${avgOrderValue.toLocaleString()}`;
        }

        // Settings page functions
        function loadSettings() {
            loadAdminsList();
        }

        function loadAdminsList() {
            const adminsList = document.getElementById('adminsList');
            adminsList.innerHTML = dashboardData.admins.map(admin => `
                <div class="flex items-center justify-between p-3 border rounded-lg">
                    <div>
                        <div class="font-medium text-gray-800">${admin.firstName} ${admin.lastName}</div>
                        <div class="text-sm text-gray-600">${admin.email} - ${admin.role}</div>
                    </div>
                    <button class="text-red-600 hover:text-red-800 text-sm" onclick="deleteAdmin(${admin.id})">Remove</button>
                </div>
            `).join('');
        }

        // Modal functions
        function initEventListeners() {
            // Add Product Button
            document.getElementById('addProductBtn').addEventListener('click', function() {
                openModal('addProductModal');
            });

            // Add Admin Button
            document.getElementById('addAdminBtn').addEventListener('click', function() {
                openModal('addAdminModal');
            });

            // Modal close buttons
            document.querySelectorAll('.modal-close').forEach(btn => {
                btn.addEventListener('click', function() {
                    const modalId = this.dataset.modal;
                    closeModal(modalId);
                });
            });

            // Close modal on outside click
            document.querySelectorAll('.modal-overlay').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        closeModal(this.id);
                    }
                });
            });

            // Form submissions
            document.getElementById('addProductForm').addEventListener('submit', handleAddProduct);
            document.getElementById('addAdminForm').addEventListener('submit', handleAddAdmin);
            document.getElementById('profileForm').addEventListener('submit', handleUpdateProfile);
            document.getElementById('systemSettingsForm').addEventListener('submit', handleSystemSettings);

            // Filter listeners
            document.getElementById('timeFilter').addEventListener('change', updateStats);
            document.getElementById('productSearch').addEventListener('input', filterProducts);
            document.getElementById('categoryFilter').addEventListener('change', filterProducts);
            document.getElementById('statusFilter').addEventListener('change', filterProducts);
            document.getElementById('orderFilter').addEventListener('change', filterOrders);
            document.getElementById('orderSearch').addEventListener('input', filterOrders);
            document.getElementById('customerSearch').addEventListener('input', filterCustomers);
            document.getElementById('customerStatusFilter').addEventListener('change', filterCustomers);
        }

        // Modal helper functions
        function openModal(modalId) {
            document.getElementById(modalId).classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
            document.body.style.overflow = '';
        }

        // Form handlers
        function handleAddProduct(e) {
            e.preventDefault();
            
            const newProduct = {
                id: Math.max(...dashboardData.products.map(p => p.id), 0) + 1,
                name: document.getElementById('productName').value,
                sku: document.getElementById('productSku').value,
                description: document.getElementById('productDescription').value,
                price: parseFloat(document.getElementById('productPrice').value),
                costPrice: parseFloat(document.getElementById('productCostPrice').value) || 0,
                stock: parseInt(document.getElementById('productStock').value),
                category: document.getElementById('productCategory').value,
                brand: document.getElementById('productBrand').value,
                status: 'active',
                images: [],
                createdAt: new Date().toISOString().split('T')[0]
            };

            dashboardData.products.push(newProduct);
            loadProducts();
            closeModal('addProductModal');
            e.target.reset();
            showNotification('Product added successfully!', 'success');
        }

        function handleAddAdmin(e) {
            e.preventDefault();
            
            const newAdmin = {
                id: Math.max(...dashboardData.admins.map(a => a.id), 0) + 1,
                firstName: document.getElementById('adminFirstName').value,
                lastName: document.getElementById('adminLastName').value,
                email: document.getElementById('adminEmail').value,
                phone: document.getElementById('adminPhone').value,
                role: document.getElementById('adminRole').value,
                status: 'active'
            };

            dashboardData.admins.push(newAdmin);
            loadAdminsList();
            closeModal('addAdminModal');
            e.target.reset();
            showNotification('Admin added successfully!', 'success');
        }

        function handleUpdateProfile(e) {
            e.preventDefault();
            showNotification('Profile updated successfully!', 'success');
        }

        function handleSystemSettings(e) {
            e.preventDefault();
            showNotification('Settings saved successfully!', 'success');
        }

        // Filter functions
        function filterProducts() {
            const searchTerm = document.getElementById('productSearch').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const statusFilter = document.getElementById('statusFilter').value;

            let filteredProducts = dashboardData.products.filter(product => {
                const matchesSearch = product.name.toLowerCase().includes(searchTerm) || 
                                    product.description.toLowerCase().includes(searchTerm) ||
                                    product.sku.toLowerCase().includes(searchTerm);
                const matchesCategory = categoryFilter === 'all' || product.category === categoryFilter;
                const matchesStatus = statusFilter === 'all' || product.status === statusFilter;

                return matchesSearch && matchesCategory && matchesStatus;
            });

            renderFilteredProducts(filteredProducts);
        }

        function renderFilteredProducts(products) {
            const tbody = document.getElementById('productsTable');
            const emptyState = document.getElementById('productsEmptyState');
            
            if (products.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            tbody.innerHTML = products.map(product => `
                <tr>
                    <td class="px-6 py-4">
                        <div>
                            <div class="font-medium text-gray-800">${product.name}</div>
                            <div class="text-sm text-gray-600">${product.description}</div>
                            <div class="text-xs text-gray-500">SKU: ${product.sku}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full">${product.category}</span>
                    </td>
                    <td class="px-6 py-4 text-gray-800">‡ß≥${product.price.toLocaleString()}</td>
                    <td class="px-6 py-4">
                        <span class="text-gray-800">${product.stock}</span>
                        ${product.stock < 10 ? '<span class="text-xs text-red-600 ml-2">Low Stock</span>' : ''}
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs rounded-full ${
                            product.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                        }">${product.status}</span>
                    </td>
                    <td class="px-6 py-4">
                        <button class="text-blue-600 hover:text-blue-800 text-sm mr-2" onclick="editProduct(${product.id})">Edit</button>
                        <button class="text-red-600 hover:text-red-800 text-sm" onclick="deleteProduct(${product.id})">Delete</button>
                    </td>
                </tr>
            `).join('');
        }

        function filterOrders() {
            const searchTerm = document.getElementById('orderSearch').value.toLowerCase();
            const statusFilter = document.getElementById('orderFilter').value;
            const dateFrom = document.getElementById('dateFromFilter').value;
            const dateTo = document.getElementById('dateToFilter').value;

            let filteredOrders = dashboardData.orders.filter(order => {
                const matchesSearch = order.id.toString().includes(searchTerm) || 
                                    order.customerName.toLowerCase().includes(searchTerm) ||
                                    order.customerEmail.toLowerCase().includes(searchTerm);
                const matchesStatus = statusFilter === 'all' || order.status === statusFilter;
                const matchesDateFrom = !dateFrom || order.orderDate >= dateFrom;
                const matchesDateTo = !dateTo || order.orderDate <= dateTo;

                return matchesSearch && matchesStatus && matchesDateFrom && matchesDateTo;
            });

            renderFilteredOrders(filteredOrders);
        }

        function renderFilteredOrders(orders) {
            const tbody = document.getElementById('ordersTable');
            const emptyState = document.getElementById('ordersEmptyState');
            
            if (orders.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            tbody.innerHTML = orders.map(order => `
                <tr>
                    <td class="px-6 py-4 font-medium text-gray-800">#${order.id}</td>
                    <td class="px-6 py-4">
                        <div>
                            <div class="font-medium text-gray-800">${order.customerName}</div>
                            <div class="text-sm text-gray-600">${order.customerEmail}</div>
                            <div class="text-xs text-gray-500">${order.customerPhone}</div>
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-sm">
                            ${order.products.map(p => `${p.name} (${p.quantity})`).join(', ')}
                        </div>
                    </td>
                    <td class="px-6 py-4 text-gray-800">‡ß≥${order.totalAmount.toLocaleString()}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs rounded-full ${getStatusColor(order.status)}">${order.status}</span>
                    </td>
                    <td class="px-6 py-4 text-gray-600">${formatDate(order.orderDate)}</td>
                    <td class="px-6 py-4">
                        <button class="text-blue-600 hover:text-blue-800 text-sm mr-2" onclick="viewOrder(${order.id})">View</button>
                        <button class="text-green-600 hover:text-green-800 text-sm" onclick="updateOrderStatus(${order.id})">Update</button>
                    </td>
                </tr>
            `).join('');
        }

        function filterCustomers() {
            const searchTerm = document.getElementById('customerSearch').value.toLowerCase();
            const statusFilter = document.getElementById('customerStatusFilter').value;
            const sortBy = document.getElementById('customerSortBy').value;

            let filteredCustomers = dashboardData.customers.filter(customer => {
                const matchesSearch = customer.name.toLowerCase().includes(searchTerm) || 
                                    customer.email.toLowerCase().includes(searchTerm);
                const matchesStatus = statusFilter === 'all' || customer.status === statusFilter;

                return matchesSearch && matchesStatus;
            });

            // Sort customers
            filteredCustomers.sort((a, b) => {
                switch(sortBy) {
                    case 'name':
                        return a.name.localeCompare(b.name);
                    case 'orders':
                        return b.totalOrders - a.totalOrders;
                    case 'spent':
                        return b.totalSpent - a.totalSpent;
                    case 'date':
                        return new Date(b.joinDate) - new Date(a.joinDate);
                    default:
                        return 0;
                }
            });

            renderFilteredCustomers(filteredCustomers);
        }

        function renderFilteredCustomers(customers) {
            const tbody = document.getElementById('customersTable');
            const emptyState = document.getElementById('customersEmptyState');
            
            if (customers.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            tbody.innerHTML = customers.map(customer => `
                <tr>
                    <td class="px-6 py-4">
                        <div class="font-medium text-gray-800">${customer.name}</div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="text-gray-600">${customer.email}</div>
                        <div class="text-sm text-gray-500">${customer.phone}</div>
                    </td>
                    <td class="px-6 py-4 text-gray-600">${customer.address}</td>
                    <td class="px-6 py-4 text-gray-800">${customer.totalOrders}</td>
                    <td class="px-6 py-4 text-gray-800">‡ß≥${customer.totalSpent.toLocaleString()}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs rounded-full ${
                            customer.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
                        }">${customer.status}</span>
                    </td>
                    <td class="px-6 py-4">
                        <button class="text-blue-600 hover:text-blue-800 text-sm mr-2" onclick="viewCustomer(${customer.id})">View</button>
                        <button class="text-red-600 hover:text-red-800 text-sm" onclick="blockCustomer(${customer.id})">Block</button>
                    </td>
                </tr>
            `).join('');
        }

        // Action functions
        function editProduct(productId) {
            const product = dashboardData.products.find(p => p.id === productId);
            if (product) {
                showNotification(`Edit product: ${product.name}`, 'info');
            }
        }

        function deleteProduct(productId) {
            if (confirm('Are you sure you want to delete this product?')) {
                dashboardData.products = dashboardData.products.filter(p => p.id !== productId);
                loadProducts();
                updateStats();
                showNotification('Product deleted successfully!', 'success');
            }
        }

        function viewOrder(orderId) {
            const order = dashboardData.orders.find(o => o.id === orderId);
            if (order) {
                const content = `
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-gray-800">Order Information</h4>
                            <div class="grid grid-cols-2 gap-4 mt-2">
                                <div><span class="text-gray-600">Order ID:</span> #${order.id}</div>
                                <div><span class="text-gray-600">Status:</span> <span class="px-2 py-1 text-xs rounded-full ${getStatusColor(order.status)}">${order.status}</span></div>
                                <div><span class="text-gray-600">Order Date:</span> ${formatDate(order.orderDate)}</div>
                                <div><span class="text-gray-600">Total Amount:</span> ‡ß≥${order.totalAmount.toLocaleString()}</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800">Customer Information</h4>
                            <div class="mt-2">
                                <div><span class="text-gray-600">Name:</span> ${order.customerName}</div>
                                <div><span class="text-gray-600">Email:</span> ${order.customerEmail}</div>
                                <div><span class="text-gray-600">Phone:</span> ${order.customerPhone}</div>
                                <div><span class="text-gray-600">Address:</span> ${order.shippingAddress}</div>
                            </div>
                        </div>
                        
                        <div>
                            <h4 class="font-semibold text-gray-800">Products</h4>
                            <div class="mt-2 space-y-2">
                                ${order.products.map(product => `
                                    <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                        <div>${product.name} x ${product.quantity}</div>
                                        <div>‡ß≥${(product.price * product.quantity).toLocaleString()}</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                `;
                document.getElementById('orderDetailsContent').innerHTML = content;
                openModal('viewOrderModal');
            }
        }

        function updateOrderStatus(orderId) {
            const order = dashboardData.orders.find(o => o.id === orderId);
            if (order) {
                const statuses = ['pending', 'processing', 'shipped', 'delivered', 'completed'];
                const currentIndex = statuses.indexOf(order.status);
                if (currentIndex < statuses.length - 1) {
                    order.status = statuses[currentIndex + 1];
                    loadOrders();
                    updateStats();
                    showNotification(`Order #${orderId} status updated to ${order.status}`, 'success');
                }
            }
        }

        function viewCustomer(customerId) {
            const customer = dashboardData.customers.find(c => c.id === customerId);
            if (customer) {
                showNotification(`View customer: ${customer.name}`, 'info');
            }
        }

        function blockCustomer(customerId) {
            if (confirm('Are you sure you want to block this customer?')) {
                const customer = dashboardData.customers.find(c => c.id === customerId);
                if (customer) {
                    customer.status = customer.status === 'active' ? 'blocked' : 'active';
                    loadCustomers();
                    showNotification(`Customer ${customer.status === 'blocked' ? 'blocked' : 'unblocked'} successfully!`, 'success');
                }
            }
        }

        function deleteAdmin(adminId) {
            if (confirm('Are you sure you want to remove this admin?')) {
                dashboardData.admins = dashboardData.admins.filter(a => a.id !== adminId);
                loadAdminsList();
                showNotification('Admin removed successfully!', 'success');
            }
        }

        // Utility functions
        function formatDate(dateString) {
            return new Date(dateString).toLocaleDateString('en-GB', {
                day: '2-digit',
                month: 'short',
                year: 'numeric'
            });
        }

        function showNotification(message, type = 'info') {
            // Create notification element
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 px-4 py-3 rounded-lg shadow-lg z-50 ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Remove after 3 seconds
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.parentNode.removeChild(notification);
                }
            }, 3000);
        }

        // Clear filters
        document.addEventListener('DOMContentLoaded', function() {
            const clearFiltersBtn = document.getElementById('clearFilters');
            if (clearFiltersBtn) {
                clearFiltersBtn.addEventListener('click', function() {
                    document.getElementById('orderSearch').value = '';
                    document.getElementById('dateFromFilter').value = '';
                    document.getElementById('dateToFilter').value = '';
                    document.getElementById('orderFilter').value = 'all';
                    loadOrders();
                });
            }
        });

        // Export customers
        document.addEventListener('DOMContentLoaded', function() {
            const exportBtn = document.getElementById('exportCustomersBtn');
            if (exportBtn) {
                exportBtn.addEventListener('click', function() {
                    exportCustomersToCSV();
                });
            }
        });

        function exportCustomersToCSV() {
            const headers = ['Name', 'Email', 'Phone', 'Address', 'Total Orders', 'Total Spent', 'Status', 'Join Date'];
            const csvContent = [
                headers.join(','),
                ...dashboardData.customers.map(customer => [
                    customer.name,
                    customer.email,
                    customer.phone,
                    customer.address,
                    customer.totalOrders,
                    customer.totalSpent,
                    customer.status,
                    customer.joinDate
                ].join(','))
            ].join('\n');

            const blob = new Blob([csvContent], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.style.display = 'none';
            a.href = url;
            a.download = 'customers.csv';
            document.body.appendChild(a);
            a.click();
            window.URL.revokeObjectURL(url);
            document.body.removeChild(a);
            
            showNotification('Customers exported successfully!', 'success');
        }
    </script>
</body>
</html>